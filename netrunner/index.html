<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Netrunner</title>
    <div style="display: none;">
        TODO:
        - screen resolution
        - deck card searching
        - token context menu
        - card context menu
    </div>
    <link rel="stylesheet" href="styles/index.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

    <script src="https://unpkg.com/peerjs@1.5.4/dist/peerjs.min.js"></script>
    <script type="module">
        import { main } from "./scripts/game.js"
        
        //entry point
        window.addEventListener("load", main)
    </script>
</head>

<body>
    <div id="start-game-panel" class="modal fade hide show" style="display: block; background-color: rgba(0, 0, 0, 0.5);" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered" style="--bs-modal-width: 600px;">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5">Start game</h1>
                </div>
                <div class="modal-body">
                    <div class="d-flex justify-content-around align-items-center m-3">
                        <div style="flex: 0 1 100px;">Host game:</div>
                        <input id="your-host-id" type="text" style="flex: 1 1 auto;" placeholder="Your host ID" title="Your host ID" readonly value="91eb3626-fe07-4adf-9a73-7496eb1e9b8b">
                        <button id="host-game" class="btn btn-outline-primary ms-3" style="flex: 0 1 100px;">Copy</button>
                    </div>
                    <div class="d-flex justify-content-around align-items-center m-3">
                        <div style="flex: 0 1 100px; width: 60px;">Join game:</div>
                        <input id="opponent-host-id" type="text" style="flex: 1 1 auto;" placeholder="Paste host ID" title="Paste host ID">
                        <button id="join-game" class="btn btn-outline-primary ms-3" style="flex: 0 1 100px;">Join</button>
                    </div>
                    <div class="d-flex justify-content-around align-items-center m-3">
                        <div style="flex: 0 1 100px; width: 60px;">Solo mode:</div>
                        <input type="text" style="flex: 1 1 auto;" placeholder="No host needed" title="No host needed" disabled>
                        <button id="play-solo" class="btn btn-outline-primary ms-3" style="flex: 0 1 100px;">Play</button>
                    </div>
                </div>
                <div class="modal-footer justify-content-start text-secondary">
                    <p>To host a game pass your host ID to a second player.</p>
                    <p>To join a game paste host ID you were given and confirm.</p>
                    <p>You can also start a solo game without using host ID.</p>
                </div>
            </div>
        </div>
    </div>
      
    <div>
        <div id="resource-panel" class="offcanvas offcanvas-start" style="width: 250px; background-color: aliceblue; z-index: 15;" tabindex="-1">
            <div class="offcanvas-header">
                <h5 class="offcanvas-title">Resource panel</h5>
            </div>
            <div class="offcanvas-body d-flex flex-column align-items-center">
                <ul>
                    <li>Credit
                        <div id="credit" class="border border-5 border-black rounded-circle" style="overflow: hidden; width: 176px; height: 176px; transform: scale(.25); margin: -64px;" title="Credit / Advancement">
                            <img style="transform: translate(-45px, -50px);" src="assets/credit.jpg">
                        </div>
                    </li>
                    <li>Advancement
                        <div id="advancement" class="border border-5 border-black rounded-circle" style="overflow: hidden; width: 256px; height: 256px; transform: scale(0.171875); margin: -104px;" title="Advancement / Credit">
                            <img style="transform: translate(-4px, -5px);" src="assets/click.jpg">
                        </div>
                    </li>
                    <li>Power
                        <div id="power" class="border border-5 border-black rounded-circle" style="overflow: hidden; width: 176px; height: 176px; transform: scale(.25); margin: -64px;" title="Power / Virus">
                            <img style="transform: translateX(-256px) translate(-45px, -47px);" src="assets/virus.jpg">
                        </div>
                    </li>
                    <li>Virus
                        <div id="virus" class="border border-5 border-black rounded-circle" style="overflow: hidden; width: 176px; height: 176px; transform: scale(.25); margin: -64px;" title="Virus / Power">
                            <img style="transform: translate(-45px, -47px);" src="assets/virus.jpg">
                        </div>
                    </li>
                    <li>Tag
                        <div id="tag" class="border border-5 border-black rounded-circle" style="overflow: hidden; width: 176px; height: 176px; transform: scale(.25); margin: -64px;" title="Tag / Bad publicity">
                            <img style="transform: translate(-45px, -50px);" src="assets/tag.jpg">
                        </div>
                    </li>
                    <li>Bad publicity
                        <div id="bad-publicity" class="border border-5 border-black rounded-circle" style="overflow: hidden; width: 176px; height: 176px; transform: scale(.25); margin: -64px;" title="Bad publicity / Tag">
                            <img style="transform: translate(-40px, -45px);" src="assets/bad_publicity.jpg">
                        </div>
                    </li>
                    <li>Brain damage
                        <div id="brain-damage" class="border border-5 border-black rounded-circle" style="overflow: hidden; width: 176px; height: 176px; transform: scale(.25); margin: -64px;" title="Brain damage">
                            <img style="transform: translate(-45px, -50px); position: absolute;" src="assets/brain_damage.jpg">
                        </div>
                    </li>
                </ul>
                <div id="token-bin" class="flex-fill m-2 token-bin">
                    <div class="text-center"><h1>Trash tokens</h1></div>
                </div>
            </div>
        </div>
        <div id="open-resource-panel" class="btn btn-primary text-nowrap rounded-end fw-bold px-1" style="position: fixed; top: 45vh; border-radius: 0; writing-mode: vertical-lr;">
            Resource panel
        </div>
        
        <div class="flex-container">
            <div id="opponent-hand" class="player-hand"><h1 id="opponent-title" class="text-secondary p-3">Runner</h1></div>
            <div class="board"></div>
            <div id="your-hand" class="player-hand"><h1 id="your-title" class="text-secondary p-3">Corporation</h1></div>
        </div>

        <div id="open-player-panel" class="btn btn-primary text-nowrap rounded-end fw-bold px-1" style="position: fixed; top: 45vh; left: 100vw; border-radius: 0; writing-mode: vertical-lr; transform: translateX(-100%) rotate(180deg);">
            Player panel
        </div>
        <div id="player-panel" class="offcanvas offcanvas-end" style="background-color: aliceblue;" tabindex="-1">
            <div class="offcanvas-header">
                <h4 class="offcanvas-title">Player panel</h4>
            </div>
            <div class="offcanvas-body">
                <div>
                    <h5>Play as:</h5>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="player-choice" id="corp-check" value="corp">
                        <label class="form-check-label" for="corp-check">Corporation</label>
                    </div>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input" type="radio" name="player-choice" id="runner-check" value="runner">
                        <label class="form-check-label" for="runner-check">Runner</label>
                    </div>
                </div>
                <hr>
                <h5>Decklist:</h5>
                <div>
                    <div id="corp-deck-panel">
                        <textarea id="corp-identity" rows="1" cols="35" spellcheck="false" class="mb-2" title="Corporation">Pravdivost Consulting: Political Solutions</textarea>
                        <textarea id="corp-deck-list" rows="25" cols="35" spellcheck="false">
3x Offworld Office
3x Orbital Superiority
3x Send a Message
1x Superconducting Hub
3x Nico Campaign
3x Regolith Mining License
3x Spin Doctor
3x Urtica Cipher
3x Government Subsidy
3x Hedge Fund
2x Public Trail
3x Retribution
2x Manegarm Skunkworks
3x Brân 1.0
3x Palisade
1x Ping
3x Funhouse
3x Whitespace
3x Ansel 1.0
3x Karunā
                        </textarea>
                    </div>
                    <div id="runner-deck-panel" class="hidden">
                        <textarea id="runner-identity" rows="1" cols="35" spellcheck="false" class="mb-2" title="Runner">Nyusha "Sable" Sintashta: Symphonic Prodigy</textarea>
                        <textarea id="runner-deck-list" rows="25" cols="35" spellcheck="false">
1x Burner
3x Creative Commission
3x Diesel
3x Dirty Laundry
3x Into the Depths
3x Rigging Up
3x Sure Gamble
3x Trick Shot
3x Aniccam
1x Simulchip
1x T400 Memory Diamond
1x DJ Fenris
3x Dr. Nuka Vrolyck
1x Telework Contract
2x The Twinning
1x Afterimage
3x Hyperbaric
1x Pressure Spike
3x Mantle
1x Paricia
1x Pelangi
1x Self-modifying Code
                        </textarea>
                    </div>
                    <button id="load-deck-button" class="btn btn-primary mt-2">Load deck</button>
                </div>
            </div>
        </div>

    </div>
    <ul class="dropdown-menu">
        <li><h4 class="dropdown-header">Card...</h4></li>
        <li id="context-menu-flip"><a class="dropdown-item disabled">flip [double click]</a></li>
        <li id="context-menu-put-under"><a class="dropdown-item disabled">put under [MMB]</a></li>
        <li><hr class="dropdown-divider"></li>
        <li><h4 class="dropdown-header">Deck...</h4></li>
        <li><a class="dropdown-item">shuffle in</a></li>
        <li><a class="dropdown-item">put on top</a></li>
        <li><a class="dropdown-item">put on bottom</a></li>
        <li><hr class="dropdown-divider"></li>
        <li><h4 class="dropdown-header">Tokens...</h4></li>
        <li><a class="dropdown-item">credit</a></li>
        <li><a class="dropdown-item">advancement</a></li>
        <li><a class="dropdown-item">power</a></li>
        <li><a class="dropdown-item">virus</a></li>
        <li><a class="dropdown-item">tag</a></li>
        <li><a class="dropdown-item">bad publicity</a></li>
        <li><a class="dropdown-item">brain damage</a></li>
    </ul>
    <!-- <div class="grid-container" style="width: 100vw; height: 100vh; position: absolute; left: 0px; top: 0px;"></div> for debugging -->
    <div id="card-layer"></div>
    <div class="text-white p-1" style="position: absolute; left: 100vw; top: 100vh; transform: translate(-100%, -100%)">
        v0.3.0.2
    </div>
</body>

</html>
